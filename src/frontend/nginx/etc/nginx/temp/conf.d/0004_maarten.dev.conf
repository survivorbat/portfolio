server {
    listen 8443 ssl http2 default_server;

    root /var/www/html/maarten.dev;

    index index.html index.json;

    location / {
    	expires {{ cache_max_time }};
    }

    location /dynmap {
        # TODO: auth_basic “Leuke Mensen Terrein”;
        proxy_pass http://dynmap;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header Host $host$uri;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-NginX-Proxy true;
        proxy_redirect off;
        proxy_cache map;
        proxy_cache_key "$host$uri";
        proxy_cache_valid 200 302 60m;
        proxy_cache_valid 404     10m;
        proxy_cache_use_stale error timeout invalid_header updating http_500 http_503 http_504;
        proxy_connect_timeout 10;
    }
}
